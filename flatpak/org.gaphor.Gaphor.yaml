app-id: org.gaphor.Gaphor
runtime: org.gnome.Platform
runtime-version: '3.30'
sdk: org.gnome.Sdk
rename-icon: gaphor
command: gaphor
finish-args:
  - --socket=x11
  - --socket=fallback-x11
  - --share=ipc
  - --socket=wayland
  - --filesystem=xdg-run/dconf
  - --filesystem=~/.config/dconfig:ro
  - --talk-name=ca.desrt.dconf
  - --env=DCONF_USER_CONFIG_DIR=.config/dconf
cleanup:
  - /include
  - /lib/debug
modules:
  - name: gaphor
    buildsystem: simple
    build-commands:
      - 'pip3 install --no-index --prefix=/app --no-deps --find-links=. .
        setuptools
        wheel
        poetry
        appdirs
        aspy.yaml
        atomicwrites
        attrs
        black
        cachecontrol
        cachy
        certifi
        cfgv
        chardet
        click
        cleo
        colorama
        coverage
        future
        gaphas
        html5lib
        identify
        idna
        importlib-metadata
        importlib-resources
        jsonschema
        lockfile
        more-itertools
        msgpack
        nodeenv
        packaging
        pathlib2
        pkginfo
        pluggy
        pre-commit
        py
        pycairo
        pygobject
        pyparsing
        pyrsistent
        pytest
        pytest-cov
        pytest-runner
        pytest-sugar
        pyyaml
        requests
        requests-toolbelt
        shellingham
        six
        termcolor
        toml
        tomlkit
        urllib3
        virtualenv
        wcwidth
        webencodings
        zipp'
    sources:
      - type: git
        # tag: 1.0.2
        url: https://github.com/gaphor/gaphor
        commit: df408b0973ece5b6904437aee6cc8301d4899ba4
      - type: file
        url: https://files.pythonhosted.org/packages/c8/b0/cc6b7ba28d5fb790cf0d5946df849233e32b8872b6baca10c9e002ff5b41/setuptools-41.0.0-py2.py3-none-any.whl
        sha256: e67486071cd5cdeba783bd0b64f5f30784ff855b35071c8670551fd7fc52d4a1
      - type: file
        url: https://files.pythonhosted.org/packages/96/ba/a4702cbb6a3a485239fbe9525443446203f00771af9ac000fa3ef2788201/wheel-0.33.1-py2.py3-none-any.whl
        sha256: 8eb4a788b3aec8abf5ff68d4165441bc57420c9f64ca5f471f58c3969fe08668
      - type: file
        url: https://files.pythonhosted.org/packages/fc/d8/9329f555ce7f19fc55ae111cf4cad17186280a9625765720b97f9888b337/poetry-0.12.12-py2.py3-none-any.whl
        sha256: 1410fedec6e1b58759b663d4018370a94ed2c291138dd05de7ef3c2a8fbeed97
      - type: file
        url: https://files.pythonhosted.org/packages/56/eb/810e700ed1349edde4cbdc1b2a21e28cdf115f9faf263f6bbf8447c1abf3/appdirs-1.4.3-py2.py3-none-any.whl
        sha256: d8b24664561d0d34ddfaec54636d502d7cea6e29c3eaf68f3df6180863e2166e
      - type: file
        url: https://files.pythonhosted.org/packages/99/ce/78be097b00817ccf02deaf481eb7a603eecee6fa216e82fa7848cd265449/aspy.yaml-1.3.0-py2.py3-none-any.whl
        sha256: 463372c043f70160a9ec950c3f1e4c3a82db5fca01d334b6bc89c7164d744bdc
      - type: file
        url: https://files.pythonhosted.org/packages/ec/0f/cd484ac8820fed363b374af30049adc8fd13065720fd4f4c6be8a2309da7/atomicwrites-1.3.0.tar.gz
        sha256: 75a9445bac02d8d058d5e1fe689654ba5a6556a1dfd8ce6ec55a0ed79866cfa6
      - type: file
        url: https://files.pythonhosted.org/packages/23/96/d828354fa2dbdf216eaa7b7de0db692f12c234f7ef888cc14980ef40d1d2/attrs-19.1.0-py2.py3-none-any.whl
        sha256: 69c0dbf2ed392de1cb5ec704444b08a5ef81680a61cb899dc08127123af36a79
      - type: file
        url: https://files.pythonhosted.org/packages/5e/f0/2c193ed1f17c97ae539da7e1c2d48b80d8cccb1917163b26a91ca4355aa6/CacheControl-0.12.5.tar.gz
        sha256: cef77effdf51b43178f6a2d3b787e3734f98ade253fa3187f3bb7315aaa42ff7
      - type: file
        url: https://files.pythonhosted.org/packages/26/37/8ce3e7b330078b6797a34e79a80a8ad6935e404a3b903765417182c9ce19/cachy-0.2.0-py2.py3-none-any.whl
        sha256: b71e8e7ddb5b386e23e81befdfac8a93885406139b8681bedc17b3444fcb8fca
      - type: file
        url: https://files.pythonhosted.org/packages/60/75/f692a584e85b7eaba0e03827b3d51f45f571c2e793dd731e598828d380aa/certifi-2019.3.9-py2.py3-none-any.whl
        sha256: 59b7658e26ca9c7339e00f8f4636cdfe59d34fa37b9b04f6f9e9926b3cece1a5
      - type: file
        url: https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl
        sha256: fc323ffcaeaed0e0a02bf4d117757b98aed530d9ed4531e3e15460124c106691
      - type: file
        url: https://files.pythonhosted.org/packages/a7/b9/270301a3a87587f09bc3985973f2e362ffa45fa5fcd5128501516b2f5e31/cleo-0.6.8-py2.py3-none-any.whl
        sha256: 9b7f79f1aa470a025c0d28c76aa225ee9e65028d32f80032e871aa3500df61b8
      - type: file
        url: https://files.pythonhosted.org/packages/30/62/cf549544a5fe990bbaeca21e9c419501b2de7a701ab0afb377bc81676600/black-19.3b0-py36-none-any.whl
        sha256: 09a9dcb7c46ed496a9850b76e4e825d6049ecd38b611f1224857a79bd985a8cf
      - type: file
        url: https://files.pythonhosted.org/packages/2f/ec/3c0a56fbc00e6b649c1dc809dc3f12c5796fbfb7940d1167b9bddc67b818/cfgv-2.0.0-py2.py3-none-any.whl
        sha256: 3bd31385cd2bebddbba8012200aaf15aa208539f1b33973759b4d02fc2148da5
      - type: file
        url: https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl
        sha256: 2335065e6395b9e67ca716de5f7526736bfa6ceead690adf616d925bdc622b13
      - type: file
        url: https://files.pythonhosted.org/packages/76/53/e785891dce0e2f2b9f4b4ff5bc6062a53332ed28833c7afede841f46a5db/colorama-0.4.1.tar.gz
        sha256: 05eed71e2e327246ad6b38c540c4a3117230b19679b875190486ddd2d721422d
      - type: file
        url: https://files.pythonhosted.org/packages/82/70/2280b5b29a0352519bb95ab0ef1ea942d40466ca71c53a2085bdeff7b0eb/coverage-4.5.3.tar.gz
        sha256: 9de60893fb447d1e797f6bf08fdf0dbcda0c1e34c1b06c92bd3a363c0ea8c609
      - type: file
        url: https://files.pythonhosted.org/packages/90/52/e20466b85000a181e1e144fd8305caf2cf475e2f9674e797b222f8105f5f/future-0.17.1.tar.gz
        sha256: 67045236dcfd6816dc439556d009594abf643e5eb48992e36beac09c2ca659b8
      - type: file
        url: https://files.pythonhosted.org/packages/8e/97/d7d96849b9df0f48caa90e0bd8a72515e0bcb0116554af0539c3690cd8bf/gaphas-1.1.0-py2.py3-none-any.whl
        sha256: ac5323775a6ae87254f028632b0692752989df6f6753767661ac8fc6a6015888
      - type: file
        url: https://files.pythonhosted.org/packages/a5/62/bbd2be0e7943ec8504b517e62bab011b4946e1258842bc159e5dfde15b96/html5lib-1.0.1-py2.py3-none-any.whl
        sha256: 20b159aa3badc9d5ee8f5c647e5efd02ed2a66ab8d354930bd9ff139fc1dc0a3
      - type: file
        url: https://files.pythonhosted.org/packages/ad/13/eb56951b6f7950cadb579ca166e448ba77f9d24efc03edd7e55fa57d04b7/idna-2.8.tar.gz
        sha256: c357b3f628cf53ae2c4c05627ecc484553142ca23264e593d327bcde5e9c3407
      - type: file
        url: https://files.pythonhosted.org/packages/aa/69/df679dfbdd051568b53c38ec8152a3ab6bc533434fc7ed11ab034bf5e82f/jsonschema-3.0.1-py2.py3-none-any.whl
        sha256: a5f6559964a3851f59040d3b961de5e68e70971afb88ba519d27e6a039efff1a
      - type: file
        url: https://files.pythonhosted.org/packages/94/f7/0ad891a459ee50e8774636798ce00e0b445addd8555661da9dbb546676a6/identify-1.4.5-py2.py3-none-any.whl
        sha256: 0a11379b46d06529795442742a043dc2fa14cd8c995ae81d1febbc5f1c014c87
      - type: file
        url: https://files.pythonhosted.org/packages/bd/23/dce4879ec58acf3959580bfe769926ed8198727250c5e395e6785c764a02/importlib_metadata-0.18-py2.py3-none-any.whl
        sha256: 6dfd58dfe281e8d240937776065dd3624ad5469c835248219bd16cf2e12dbeb7
      - type: file
        url: https://files.pythonhosted.org/packages/2f/f7/b4aa02cdd3ee7ebba375969d77c00826aa15c5db84247d23c89522dccbfa/importlib_resources-1.0.2-py2.py3-none-any.whl
        sha256: 6e2783b2538bd5a14678284a3962b0660c715e5a0f10243fd5e00a4b5974f50b
      - type: file
        url: https://files.pythonhosted.org/packages/c8/22/9460e311f340cb62d26a38c419b1381b8593b0bb6b5d1f056938b086d362/lockfile-0.12.2-py2.py3-none-any.whl
        sha256: 6c3cb24f344923d30b2785d5ad75182c8ea7ac1b6171b08657258ec7429d50fa
      - type: file
        url: https://files.pythonhosted.org/packages/1f/9e/942df77ddde2fae3f319f2ab8b5d00d5f6b115496e2eb4bad37d1aaefeea/more_itertools-7.1.0-py3-none-any.whl
        sha256: 3ad685ff8512bf6dc5a8b82ebf73543999b657eded8c11803d9ba6b648986f4d
      - type: file
        url: https://files.pythonhosted.org/packages/81/9c/0036c66234482044070836cc622266839e2412f8108849ab0bfdeaab8578/msgpack-0.6.1.tar.gz
        sha256: 4008c72f5ef2b7936447dcb83db41d97e9791c83221be13d5e19db0796df1972
      - type: file
        url: https://files.pythonhosted.org/packages/00/6e/ed417bd1ed417ab3feada52d0c89ab0ed87d150f91590badf84273e047c9/nodeenv-1.3.3.tar.gz
        sha256: ad8259494cf1c9034539f6cced78a1da4840a4b157e23640bc4a0c0546b0cb7a
      - type: file
        url: https://files.pythonhosted.org/packages/91/32/58bc30e646e55eab8b21abf89e353f59c0cc02c417e42929f4a9546e1b1d/packaging-19.0-py2.py3-none-any.whl
        sha256: 9e1cbf8c12b1f1ce0bb5344b8d7ecf66a6f8a6e91bcb0c84593ed6d3ab5c4ab3
      - type: file
        url: https://files.pythonhosted.org/packages/9b/7e/7d701686013c0d7dae62e0977467232a6adc2e562c23878eb3cd4f97d02e/pastel-0.1.0-py3-none-any.whl
        sha256: d1fee8079534f99f1805a044fef946d23eee6d6a7cd34292c30e6c16be9a80b9
      - type: file
        url: https://files.pythonhosted.org/packages/67/c6/4dbf5dfdbe1140cadf765c3896acc098578626c35721bc7d3eb35f6a8fc1/pathlib2-2.3.4-py2.py3-none-any.whl
        sha256: 2156525d6576d21c4dcaddfa427fae887ef89a7a9de5cbfe0728b3aafa78427e
      - type: file
        url: https://files.pythonhosted.org/packages/e6/d5/451b913307b478c49eb29084916639dc53a88489b993530fed0a66bab8b9/pkginfo-1.5.0.1-py2.py3-none-any.whl
        sha256: a6d9e40ca61ad3ebd0b72fbadd4fba16e4c0e4df0428c041e01e06eb6ee71f32
      - type: file
        url: https://files.pythonhosted.org/packages/06/ee/de89e0582276e3551df3110088bf20844de2b0e7df2748406876cc78e021/pluggy-0.12.0-py2.py3-none-any.whl
        sha256: b9817417e95936bf75d85d3f8767f7df6cdde751fc40aed3bb3074cbcb77757c
      - type: file
        url: https://files.pythonhosted.org/packages/59/22/13e65062888c1f53619ef557f885817874aabc447e1cbb4cf774ceaf222f/pre_commit-1.17.0-py2.py3-none-any.whl
        sha256: 92e406d556190503630fd801958379861c94884693a032ba66629d0351fdccd4
      - type: file
        url: https://files.pythonhosted.org/packages/76/bc/394ad449851729244a97857ee14d7cba61ddb268dce3db538ba2f2ba1f0f/py-1.8.0-py2.py3-none-any.whl
        sha256: 64f65755aee5b381cea27766a3a147c3f15b9b6b9ac88676de66ba2ae36793fa
      - type: file
        url: https://files.pythonhosted.org/packages/48/20/5e83af98eb897935bf7dc39455e892ba866feebb9b7c3b392982866f9958/pycairo-1.18.1.tar.gz
        sha256: 70172e58b6bad7572a3518c26729b074acdde15e6fee6cbab6d3528ad552b786
      - type: file
        url: https://files.pythonhosted.org/packages/40/ee/8daf797cda4ffe7724b9d47cbb5e2b44ca6235764622d163c586bd9bd7c5/PyGObject-3.32.2.tar.gz
        sha256: fa82746df059b9e0dcf473e0a9ff0693aa5e064f1ca1e2c46b5ac815bceda1ad
      - type: file
        url: https://files.pythonhosted.org/packages/cc/61/dab2081d3d86dcf0b9f5dcfb11b256d76cd14aad7ccdd7c8dd5e7f7e41a0/pylev-1.3.0.tar.gz
        sha256: 063910098161199b81e453025653ec53556c1be7165a9b7c50be2f4d57eae1c3
      - type: file
        url: https://files.pythonhosted.org/packages/dd/d9/3ec19e966301a6e25769976999bd7bbe552016f0d32b577dc9d63d2e0c49/pyparsing-2.4.0-py2.py3-none-any.whl
        sha256: 9b6323ef4ab914af344ba97510e966d64ba91055d6b9afa6b30799340e89cc03
      - type: file
        url: https://files.pythonhosted.org/packages/8c/46/4e93ab8a379d7efe93f20a0fb8a27bdfe88942cc954ab0210c3164e783e0/pyrsistent-0.14.11.tar.gz
        sha256: 3ca82748918eb65e2d89f222b702277099aca77e34843c5eb9d52451173970e2
      - type: file
        url: https://files.pythonhosted.org/packages/8c/6f/4db6124788e9b281d94693e21e5a40d00f417763dcda10edc8a70655cb92/pytest-4.6.4-py2.py3-none-any.whl
        sha256: 6aa9bc2f6f6504d7949e9df2a756739ca06e58ffda19b5e53c725f7b03fb4aae
      - type: file
        url: https://files.pythonhosted.org/packages/84/7b/73f8522619d1cbb22b9a36f9c54bc5ce5e24648e53cc1bf566477d2d1f2b/pytest_cov-2.7.1-py2.py3-none-any.whl
        sha256: 2b097cde81a302e1047331b48cadacf23577e431b61e9c6f49a1170bbe3d3da6
      - type: file
        url: https://files.pythonhosted.org/packages/c6/cd/3871df1ef4cec65b664738fafedf999cdac33b193367b3e313dd569c169a/pytest_runner-4.5.1-py2.py3-none-any.whl
        sha256: 175d3d9271332b54df0190bec59c3614676f6895ad1056aa391ed034e03f95f6
      - type: file
        url: https://files.pythonhosted.org/packages/55/59/f02f78d1c80f7e03e23177f60624c8106d4f23d124c921df103f65692464/pytest-sugar-0.9.2.tar.gz
        sha256: fcd87a74b2bce5386d244b49ad60549bfbc4602527797fac167da147983f58ab
      - type: file
        url: https://files.pythonhosted.org/packages/a3/65/837fefac7475963d1eccf4aa684c23b95aa6c1d033a2c5965ccb11e22623/PyYAML-5.1.1.tar.gz
        sha256: b4bb4d3f5e232425e25dda21c070ce05168a786ac9eda43768ab7f3ac2770955
      - type: file
        url: https://files.pythonhosted.org/packages/7d/e3/20f3d364d6c8e5d2353c72a67778eb189176f08e873c9900e10c0287b84b/requests-2.21.0-py2.py3-none-any.whl
        sha256: 7bf2a778576d825600030a110f3c0e3e8edc51dfaafe1c146e39a2027784957b
      - type: file
        url: https://files.pythonhosted.org/packages/97/8a/d710f792d6f6ecc089c5e55b66e66c3f2f35516a1ede5a8f54c13350ffb0/requests_toolbelt-0.8.0-py2.py3-none-any.whl
        sha256: 42c9c170abc2cacb78b8ab23ac957945c7716249206f90874651971a4acff237
      - type: file
        url: https://files.pythonhosted.org/packages/2d/ac/e8a34d4b3d24bf554f40651b2aac549a3fc7223725bf10fbdfe2083b6372/shellingham-1.3.1-py2.py3-none-any.whl
        sha256: 77d37a4fd287c1e663006f7ecf1b9deca9ad492d0082587bd813c44eb49e4e62
      - type: file
        url: https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl
        sha256: 3350809f0555b11f552448330d0b52d5f24c91a322ea4a15ef22629740f3761c
      - type: file
        url: https://files.pythonhosted.org/packages/8a/48/a76be51647d0eb9f10e2a4511bf3ffb8cc1e6b14e9e4fab46173aa79f981/termcolor-1.1.0.tar.gz
        sha256: 1d6d69ce66211143803fbc56652b41d73b4a400a2891d7bf7a1cdf4c02de613b
      - type: file
        url: https://files.pythonhosted.org/packages/a2/12/ced7105d2de62fa7c8fb5fce92cc4ce66b57c95fb875e9318dba7f8c5db0/toml-0.10.0-py2.py3-none-any.whl
        sha256: 235682dd292d5899d361a811df37e04a8828a5b1da3115886b73cf81ebc9100e
      - type: file
        url: https://files.pythonhosted.org/packages/71/c6/06c014b92cc48270765d6a9418d82239b158d8a9b69e031b0e2c6598740b/tomlkit-0.5.3-py2.py3-none-any.whl
        sha256: f077456d35303e7908cc233b340f71e0bec96f63429997f38ca9272b7d64029e
      - type: file
        url: https://files.pythonhosted.org/packages/62/00/ee1d7de624db8ba7090d1226aebefab96a2c71cd5cfa7629d6ad3f61b79e/urllib3-1.24.1-py2.py3-none-any.whl
        sha256: 61bf29cada3fc2fbefad4fdf059ea4bd1b4a86d2b6d15e1c7c0b582b9752fe39
      - type: file
        url: https://files.pythonhosted.org/packages/c4/9a/a3f62ac5122a65dec34ad4b5ed8d802633dae4bc06a0fc62e55fe3e96fe1/virtualenv-16.6.1-py2.py3-none-any.whl
        sha256: d28ca64c0f3f125f59cabf13e0a150e1c68e5eea60983cc4395d88c584495783
      - type: file
        url: https://files.pythonhosted.org/packages/55/11/e4a2bb08bb450fdbd42cc709dd40de4ed2c472cf0ccb9e64af22279c5495/wcwidth-0.1.7.tar.gz
        sha256: 3df37372226d6e63e1b1e1eda15c594bca98a22d33a23832a90998faa96bc65e
      - type: file
        url: https://files.pythonhosted.org/packages/f4/24/2a3e3df732393fed8b3ebf2ec078f05546de641fe1b667ee316ec1dcf3b7/webencodings-0.5.1-py2.py3-none-any.whl
        sha256: a0af1213f3c2226497a97e2b3aa01a7e4bee4f403f95be16fc9acd2947514a78
      - type: file
        url: https://files.pythonhosted.org/packages/da/bd/1a5fdf15aa44231fd09f63ecf175b60f057ae37ec65b343bb009364923f3/zipp-0.5.2-py2.py3-none-any.whl
        sha256: 8a5712cfd3bb4248015eb3b0b3c54a5f6ee3f2425963ef2a0125b8bc40aafaec
    post-install:
      - install -Dm644 flatpak/org.gaphor.Gaphor.appdata.xml /app/share/appdata/org.gaphor.Gaphor.appdata.xml
      - install -Dm644 flatpak/org.gaphor.Gaphor.desktop /app/share/applications/org.gaphor.Gaphor.desktop
      - install -Dm644 gaphor/ui/pixmaps/gaphor-24x24.png /app/share/icons/hicolor/24x24/apps/gaphor.png
      - install -Dm644 gaphor/ui/pixmaps/gaphor-48x48.png /app/share/icons/hicolor/48x48/apps/gaphor.png
      - install -Dm644 gaphor/ui/pixmaps/gaphor-96x96.png /app/share/icons/hicolor/96x96/apps/gaphor.png
      - install -Dm644 gaphor/ui/pixmaps/gaphor-256x256.png /app/share/icons/hicolor/256x256/apps/gaphor.png
      - install -Dm644 iconsrc/gaphor.svg /app/share/icons/hicolor/scalable/apps/gaphor.svg

