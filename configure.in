dnl Process this file with autoconf to produce a configure script.

AC_INIT(gaphor, 0.0.1)

AC_CONFIG_SRCDIR([utils/genUML.py])
AM_CONFIG_HEADER(config.h)

dnl This is the only place where the package version appears
AM_INIT_AUTOMAKE(AC_PACKAGE_NAME, AC_PACKAGE_VERSION)

dnl put the ACLOCAL flags in the makefile
ACLOCAL="$ACLOCAL $ACLOCAL_FLAGS"

AC_PATH_PROG(PYTHON, python)

AC_MSG_CHECKING(for python >= 2.2a4)
prog="
import sys, string
minver = (2,2,0,'alpha',4)
if sys.version_info < minver:
  sys.exit(1)
  sys.exit(0)"
if $PYTHON -c "$prog" 1>&AC_FD_CC 2>&AC_FD_CC; then
    AC_MSG_RESULT(okay)
else
    AC_MSG_ERROR(too old)
fi

AC_MSG_CHECKING(for required python modules)
for mod in types sys xmllib weakref copy; do
    if $PYTHON -c "import $mod" 1>&AC_FD_CC 2>&AC_FD_CC; then
        true
    else
        AC_MSG_ERROR(module '$mod' not found)
    fi
done
AC_MSG_RESULT(okay)

AC_CONFIG_FILES(
    Makefile
    utils/Makefile
    gaphor/Makefile
    gaphor/UML/Makefile
    gaphor/ui/Makefile
    tests/Makefile
    doc/Makefile)
AC_OUTPUT
